도메인 4: 결제 및 요금 (16%)
4.1 AWS의 다양한 요금 모델 비교 및 대조
4.2 AWS 결제 및 요금과 관련된 여러 가지 계정 구조 인식
4.3 결제 지원에 이용할 수 있는 리소스 파악

=============

AWS 비용 관리 서비스

- AWS Cost Explorer
AWS 비용 및 사용 분석

AWS Cost Explorer는 시간에 따른 AWS 비용과 사용량을 시각화, 이해 및 관리할 수 있는 손쉬운 인터페이스를 제공합니다.


- AWS 예산
사용자 지정 비용 및 사용 예산을 설정

AWS 예산을 사용하면 비용 또는 사용량이 예산 금액을 초과하거나 초과할 것으로 예상될 때 알림을 받도록 사용자 지정 예산을 설정할 수 있습니다.
AWS 예산을 사용하여 예약 사용률 또는 적용 범위 목표를 설정하고 사용률이 정의한 임계값 아래로 떨어질 때 알림을 받을 수 있습니다.
예약 알림은 Amazon EC2, Amazon RDS, Amazon Redshift, Amazon ElastiCache 및 Amazon Elasticsearch 예약에 대해 지원됩니다.



- AWS 비용 및 사용 보고서
포괄적인 비용 및 사용 정보에 액세스

AWS 비용 및 사용 보고서에는 AWS 서비스, 요금 및 예약(예: Amazon EC2 예약 인스턴스(RI))에 대한 추가 메타데이터를 비롯하여
사용 가능한 가장 포괄적인 AWS 비용 및 사용 데이터가 포함됩니다.

AWS 비용 및 사용 보고서에는 계정 및 해당 IAM 사용자가 이용하는 각 서비스 카테고리에 대한 AWS 사용량이
비용 할당을 위해 활성화한 태그와 함께 시간별 또는 일별 항목으로 나열됩니다.
사용량 데이터를 일별 또는 시간별 레벨로 집계하도록 AWS 비용 및 사용 보고서를 사용자 정의할 수도 있습니다.


- 예약 인스턴스 보고
예약 인스턴스(RI) 심층 분석

AWS는 Amazon EC2, Amazon RDS, Amazon Elasticsearch, Amazon ElastiCache 및 Amazon Redshift 예약을
효과적으로 관리하고 모니터링할 수 있도록 다양한 RI별 비용 관리 솔루션을 기본적으로 제공합니다.

예약 인스턴스 사용률 및 비율 보고서는 AWS Cost Explorer에서 기본적으로 제공됩니다.



- Savings Plans
AWS 컴퓨팅 서비스를 위한 유연한 요금 모델
유연한 요금으로 컴퓨팅 사용량에 따른 비용 72% 절감

Savings Plans에서는 1년 또는 3년 동안 특정 양의 컴퓨팅 파워를 사용하기로 약정함으로써
EC2 예약 인스턴스와 마찬가지로 온디맨드에 비해 상당한 비용을 절감할 수 있습니다.
1년 또는 3년 약정으로 Savings Plans에 가입할 수 있으며
AWS Cost Explorer에서 권장 사항, 성능 보고 및 예산 알림 기능을 활용하여 플랜을 손쉽게 관리할 수 있습니다.



-------------------------



AWS 요금

클라우드 서비스의 요금에 대해 사용한 만큼 지불하는 방식을 지원합니다.

사용량에 따라 지불
예약을 통한 비용 절감
- Amazon EC2 및 Amazon RDS와 같은 특정 서비스의 경우, 예약 용량에 투자할 수 있습니다.
- 예약 인스턴스의 경우 동일한 온디맨드 용량과 비교하여 최대 75%까지 절감할 수 있습니다.
- 예약 인스턴스를 구매할 때는 선결제 금액이 많을수록 할인율이 높습니다.
더 많이 사용하여 더 적은 비용 지불
- AWS에서는 대량 구매 할인을 받고 사용량 증가에 따라 상당한 비용 절감을 실현할 수 있습니다.
- S3와 같은 서비스는 요금이 계층화되어 있습니다. 즉, 더 많이 사용할수록 GB당 요금이 줄어듭니다. 


AWS 요금 계산기
단일 인스턴스를 실행하든, 수십 개의 개별 서비스를 실행하든, AWS 요금 계산기를 사용하여 월별 청구액을 추산할 수 있습니다.
계산기를 사용하면 개별 또는 여러 요금을 추산하고 템플릿을 사용하여 전체 솔루션을 살펴볼 수 있습니다.

TCO 계산기
AWS TCO 계산기는 AWS 사용 시 절감액을 살펴보고 온프레미스 및 코로케이션 환경과 비교할 수 있는 옵션을 제공합니다.
TCO 계산기는 현재 인프라를 가장 비용 효율적인 AWS 상품과 연결합니다.





비용 최적화
Amazon RDS for Aurora 및 Amazon Redshift와 같은 서비스를 사용하면 비슷한 온프레미스 솔루션과 비교하여 1/10의 비용으로 엔터프라이즈급 솔루션을 실행할 수 있습니다.

1) 가장 낮은 비용으로 용량 요구 사항을 충족하도록 적절하게 서비스 규모 조정
2) 예약 시 비용 절감
3) 스팟 인스턴스 사용
4) 서비스 사용 모니터링 및 추적
5) Cost Explorer를 사용하여 비용 절감 최적화

================

요금 기본정보(Pricing Fundamentals)
- AWS에서는 개별 제품을 사용한 만큼만 비용을 지불한다. (사용을 중단 할 때 추가 비용이나 종료 수수료는 없다.)
- 예약하면 더 저렴하고 많이 사용할 수록 단위당 비용이 적어지며 AWS 규모가 커질 수록 비용이 적어지는 종량과금제이다.
- 종량제 모델에서는 필요한 만큼 인프라를 조정할 수 있으므로 수요를 예측할 필요가 없다.
  따라서 오버프로비저닝 또는 용량 부족에 대한 위험이 감소한다.
- 필요한 만큼 요금을 지불하기 때문에 고객은 혁신과 발명에 집중할 수 있음
- EC2, RDS 는 사전에 용량을 예약할 수 있다.
  예약인스턴스는 온디멘드 용량에 비해 최대 75% 까지 절약된다.
- 예약 인스턴스의 3가지 옵션
  : 사전에 완불하는 AURI
  : 일부 지불하는 PURI
  : 사전 지불이 전혀 없는 NURI

  : 사전 지불 금액이 클 수록 할인폭이 커진다.

- 데이터수신 요금은 무료이다.
- 조직에 여러 AWS 계정이 있는 경우 통합 결제 방식으로 AWS 사용을 통합할 수 있다.
  -> AWS Organizations (사용자가 생성해 중앙에서 관리하는 조직으로 여러 AWS 계정을 통합할 수 있는 계정 관리 서비스) : https://aws.amazon.com/ko/organizations/
- 요금은 매월 말 사용한 만큼 지불한다.

요금 세부 사항(요금 내역)
- AWS 비용의 기본 사항
  : 유료 - 컴퓨팅 용량, 스토리지, 아웃바운드 데이터 전송(통합)
  : 무료 - 인바운드 데이터 전송

  : 동일한 리전안에서 다른 제품간에 데이터를 전송하는 경우는 무료
- EC2(Elastic Compute Cloud)
  : 사용한 용량에 대해서만 청구
  : 초/시간당 결제 - 리소스는 실행중인 경우에만 요금이 청구된다. (최소 60초)
  : 요금은 'AWS 리전, OS, 인스턴스 유형, 인스턴스 크기'에 따라 달라진다.

  : 온디맨드 인스턴스의 경우 최소 약정 없이 사용한 컴퓨팅 파워에 대해서만 시간당으로 비용을 지불한다.

  : 구매유형 - 온디맨드 인스턴스(사용한 만큼), 예약 인스턴스(시간당 요금 할인 해줌), 스팟 인스턴스(미사용 EC2 용량에 입찰)

  : 기타고려사항 - 인스턴스 수(피크로드를 처리하기 위해 여러 인스턴스를 프로비저닝)
                로드밸런싱(ELB를 사용하여 트래픽 분산, 로드밸런서 요금은 로드밸런서가 실행되는 시간 / 로드밸런서가 처리하는 데이터에 따라 달라진다)
  
  : 제품 옵션
    - 모니터링
      : CloudWatch를 사용하여 인스턴스를 모니터링 한다
      : 기본 모니터링 (기본 옵션으로 사용 가능하며 추가 요금 없음)
      : 세부 모니터링 (월 고정비용으로 사용하는 경우 사용 가능, 시간당으로 인스턴스 요금을 계산하여 월별 청구)
    - Auto Scaling : 추가 요금 없음 - CloudWatch 비용만 부과
    - 탄력적 IP 주소 : 실행중인 인스턴스와 연결된 경우 요금 부과 되지 않음
  : 운영체제 요금은인스턴스 요금에 포함됨
- S3(Simple Storage Service)
  : Standard Storage (기본), Standard-Infrequent Access(S-IA) : 약간 낮은 중복성, 액세스 빈도가 낮은 데이터를 저장하여 비용을 줄일 수 있다.
  : 스토리지 비용은 '객체수와 크기, 스토리지 유형'에 따라 달라진다.
  : 요금 기준
    - 요청 (요청수, 요청유형 - GET 요청에 대한 요금이 다름)
    - 데이터 전송 : S3 리전에서 송신된 데이터의 양
- EBS (Elastic Block Store)
  : 클라우드의 가상디스크와 유사
  : 볼륨유형 - 범용(SSD), 프로비저닝된 IOPS(SSD), 마그네틱 
  : 요금(비용 요소)
    - 볼륨 : 모든 타입이 스토리지 사용을 중단할 때까지의 기가바이트 양을 기준으로 월별 요금이 부과됨
    - IOPS (초당 입출력 작업 수)
      : 범용(SSD) - 요금에 포함되어 있음
      : 마그네틱 - 요청수를 기준으로 요금이 부과됨
      : 프로비저닝된 IOPS(SSD) - 프로비저닝한 IOPS의 양 곱하기 그 달에 프로비저닝한 날수의 비율로 계산하여 과금
    - 스냅샷 : 저장된 데이터의 월별 GB당 추가되는 비용
    - 데이터 전송
      : 인바운드 데이터 전송은 요금이 부과되지 않음
      : 아웃바운드 데이터 전송 요금은 계층화 되어 있음
- RDS (Relational Database Service)
  : 비용 요소
    - 시간당 결제 : 실행할 때 리소스 요금이 발생
    - 데이터베이스 특성 : 엔진, 크기 및 메모르 클래스가 비용에 영향을 미친다
    - DB 구매 유형
      : 온디맨드 데이터베이스 인스턴스 : 시간당 요금이 부과
      : 예약 데이터베이스 인스턴스 : 예약한 데이터베이스 인스턴스에 대해 할인된 선결제 금액을 지불
      : 피크로드를 처리하기 위해 여러 DB 인스턴스를 프로비저닝 한다.
    - 프로비저닝된 스토리지
      : 사용중인 데이터베이스 스토리지의 최대 100%에 해당하는 백업 스토리지에는 비용이 부과되지 않는다.
      : 종료된 DB 인스턴스의 백업 스토리지에는 월별 GB당 요금이 청구된다
    - 추가 스토리지 : 프로비저닝된 스토리지 이외의 백업 스토리지에는 월별 GB당 요금이 청구된다.
    - 배포유형
      : 스토리지 및 I/O 요금 변수
      : 단일 가용 영역
      : 다중 가용 영역
    - 데이터 전송
      : 인바운드 데이터 전송에는 요금이 부과되지 않음
      : 아웃바운드 데이터 전송에는 계층화된 요금이 부과 됨
- CloudFront
  : 비용 요소
    - 요금은 지리적 리전에 따라 다름 : 콘텐츠를 사용하는 엣지 로케이션을 기준으로 과금된다.
    - 요금 기준 : 요청, 데이터 송신

AWS Trusted Advisor
- AWS에서 사용하는 리소스가 많아지면 모든 리소스에 대한 관리가 어렵다.
- 보안, 내결함성, 성능, 비용최적화에 대하여 계정 내의 모든 리소스를 검사하여 모범사례에 부합하는지 확인을 하는 서비스
- 자동화 기능도 사용 가능
  : CloudWatch 이벤트와 통합되어 있기 때문에 AWS Lambda 같은 제품과 적은 대상을 사용하여 동작을 자동화 하고 리소스 최적화를 자동화 할 수 있다.

AWS Support Plan
- 다음 고객들에 대한 지원이 제공된다.
  : AWS로 테스트 (시험삼아 사용해보려는 고객)
  : AWS를 프로덕션 사용 사례를 찾는 고객
  : AWS를 비즈니스 크리티컬한 용도에 현재 사용중인 고객
- Support 도구와 리소스
  : 사전 지침이 필요한 경우 - 기술 지원 관리자 (TAM)를 담당자로 지정하여 연결해 줌
  : 모범 사례에 따라 사용중인 AWS 환경을 개선하려는 경우 - Trusted Advisor를 사용하면 됨
  : 계정 지원이 필요한 경우 - AWS Support 컨시어지 (결제 및 계정 전문가 - 기술과 무관한 분야)
- Support 플랜 옵션
  : Basic Support
  : Developer Support
  : Business Support
  : Enterprise Support
